{% extends "base.html" %}

{% block title %}Question {{ question_num }} of {{ total_questions }}{% endblock %}

{% block content %}
<div class="question-card">
    <div class="question-header">
        Question {{ question_num }} of {{ total_questions }}
    </div>

    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ (question_num / total_questions * 100) }}%"></div>
    </div>

    <div class="question-text">
        {{ question.question }}
    </div>

    <form method="POST" action="{{ url_for('submit_answer') }}">
        {% if question.type == 'multiple_choice' or question.type == 'auxiliary_choice' %}
            <!-- Multiple choice options -->
            <div style="margin-bottom: 20px;">
                {% for choice in question.choices %}
                    <label style="display: block; padding: 15px; margin-bottom: 10px; background: white; border: 2px solid var(--medium-gray); border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                        <input type="radio" name="answer" value="{{ choice }}" required style="margin-right: 10px;">
                        <span style="font-size: 1.1rem;">{{ choice }}</span>
                    </label>
                {% endfor %}
            </div>
        {% else %}
            <!-- Text input for other question types -->
            <input type="text"
                   name="answer"
                   class="answer-input"
                   placeholder="Type your answer..."
                   autocomplete="off"
                   autofocus
                   required>
        {% endif %}

        <div class="button-group">
            <button type="submit" class="btn btn-primary btn-large">Submit Answer</button>
        </div>
        <div class="button-group" style="margin-top: 10px;">
            <a href="{{ url_for('home') }}" class="btn btn-secondary" onclick="return confirm('Are you sure you want to exit? Your progress will be lost.')">üè† Home</a>
            <a href="javascript:history.back()" class="btn btn-secondary" onclick="return confirm('Are you sure you want to go back? Your progress will be lost.')">‚Ü©Ô∏è Back to Menu</a>
        </div>
    </form>
</div>

<div class="text-center">
    <p style="color: #999; font-size: 0.85rem;">
        üí° Tip: You don't need to type accents (√†, √®, √¨, √≤, √π). Just type regular letters!
    </p>
</div>

<script>
// Auto-submit on Enter
document.querySelector('form').addEventListener('submit', function(e) {
    const input = document.querySelector('.answer-input');
    if (input.value.trim() === '') {
        e.preventDefault();
        alert('Please enter an answer');
    }
});
</script>
{% endblock %}
