{% extends "base.html" %}

{% block title %}Quiz Summary{% endblock %}

{% block content %}
<div class="summary-card">
    <h2>ğŸ“Š Quiz Complete!</h2>

    <div class="grade-display">{{ summary.grade_emoji }}</div>
    <div class="grade-text">{{ summary.grade }}</div>

    <div class="summary-stats">
        <div class="stat-item">
            <div class="label">Score</div>
            <div class="value">{{ summary.correct }}/{{ summary.total }}</div>
        </div>

        <div class="stat-item">
            <div class="label">Accuracy</div>
            <div class="value">{{ "%.1f"|format(summary.accuracy) }}%</div>
        </div>

        <div class="stat-item">
            <div class="label">Time</div>
            <div class="value" style="font-size: 1.3rem;">{{ summary.time }}</div>
        </div>
    </div>

    <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid var(--medium-gray);">
        <p style="color: #666; font-size: 0.9rem;">âœ“ Progress saved to your learning history</p>
    </div>
</div>

<!-- Review Answers -->
<div class="mb-30">
    <h3 style="margin-bottom: 20px;">Review Your Answers</h3>

    {% for answer in summary.answers %}
        <div class="feedback {% if answer.is_correct %}correct{% else %}incorrect{% endif %}" style="margin-bottom: 15px; padding: 15px; text-align: left;">
            <div style="font-weight: 600; margin-bottom: 8px;">{{ answer.question }}</div>

            {% if answer.is_correct %}
                <div style="color: #059669;">âœ… {{ answer.user_answer }}</div>
            {% else %}
                <div style="color: #DC2626;">âŒ Your answer: {{ answer.user_answer }}</div>
                <div style="color: #059669;">âœ… Correct: {{ answer.correct_answer }}</div>
            {% endif %}
        </div>
    {% endfor %}
</div>

{% if flagged_questions %}
<div class="mb-30" style="margin-top: 20px;">
    <h3 style="margin-bottom: 15px;">ğŸš© Flagged for Review</h3>
    {% for item in flagged_questions %}
        <div style="background: #fff8e1; border: 1px solid #f5c518; border-radius: 8px; padding: 12px 15px; margin-bottom: 10px; text-align: left;">
            <div style="font-weight: 600; margin-bottom: 4px;">{{ item.question }}</div>
            <div style="color: #059669; font-size: 0.9rem;">âœ… Correct answer: {{ item.answer }}</div>
        </div>
    {% endfor %}
</div>
{% endif %}

<div class="button-group">
    <a href="{{ practice_again_url }}" class="btn btn-primary" style="background: var(--green);">ğŸ”„ Practice Again</a>
    <a href="{{ url_for('category_menu', level=level) }}" class="btn btn-secondary">ğŸ”™ Back to {{ level }} Menu</a>
    <a href="{{ url_for('home') }}" class="btn btn-secondary">ğŸ  Home</a>
</div>
{% endblock %}
